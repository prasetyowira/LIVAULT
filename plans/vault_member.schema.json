{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "VaultMember",
    "type": "object",
    "properties": {
      "member_id": {
        "description": "The unique identifier for the vault member. This is an Internet Computer Principal identifier represented as a string.",
        "type": "string"
      },
      "vault_id": {
        "description": "The Internet Computer Principal identifier (string) of the vault this member belongs to.",
        "type": "string"
      },
      "role": {"type": "string","enum":["heir","witness"]},
      "principal_id": {
        "description": "The member's actual Internet Computer Principal identifier (string). This should usually match member_id.",
        "type": "string"
      },
      "name": {"type": "string"},
      "relation_to_owner": {
        "type": "string",
        "enum": ["spouse","son","daughter","father","mother","brother","sister","friend","lawyer","notary","other"]
      },
      "status": {"type": "string","enum":["active","invited","expired","revoked"]},
      "token_claimed_at": {"type": ["integer","null"]},
      "token_expires_at": {"type": ["integer","null"]},
      "passphrase_set": {"type": "boolean"},
      "recovery_qr_issued": {"type": "boolean"},
      "shamir_share_id": {"type": "string"},
      "approval": {
        "type": "object",
        "properties": {
          "can_approve": {"type": "boolean"},
          "has_approved": {"type": "boolean"},
          "approved_at": {"type": ["integer","null"]}
        },
        "required": ["can_approve","has_approved","approved_at"],
        "additionalProperties": false
      },
      "access": {
        "type": "object",
        "properties": {
          "unlock_attempts_today": {"type": "integer"},
          "last_access_at": {"type": ["integer","null"]}
        },
        "required": ["unlock_attempts_today","last_access_at"],
        "additionalProperties": false
      },
      "audit_log": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "action": {"type": "string"},
            "timestamp": {"type": "integer"}
          },
          "required": ["action","timestamp"],
          "additionalProperties": false
        }
      }
    },
    "required": ["member_id","vault_id","role","principal_id","name","relation_to_owner","status","passphrase_set","recovery_qr_issued","shamir_share_id","approval","access","audit_log"],
    "additionalProperties": false
  }